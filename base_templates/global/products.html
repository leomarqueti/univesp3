{% extends 'global/base.html' %}
{% load static %}

{% block title %}Produtos - Sorveteria Del√≠cia Gelada{% endblock %}

{% block content %}
<div class="products-container">
  <div class="products-header">
    <h1>Gerenciamento de Produtos</h1>
    <button id="btn-refresh" class="btn-secondary">
      <i class="icon-refresh">‚Üª</i> Atualizar Lista
    </button>
  </div>

  <div class="product-form-container">
    <h2 id="form-title">Cadastrar Novo Produto</h2>
    <form id="product-form" method="post">
      {% csrf_token %}
      <input type="hidden" name="id">

      <div class="form-row">
        <div class="form-group">
          <label for="product-name">Nome do Produto</label>
          <input type="text" id="product-name" name="name" required placeholder="Ex: Sorvete de Morango">
        </div>

        <div class="form-group">
          <label for="product-value">Valor (R$)</label>
          <input type="number" id="product-value" name="value" step="0.01" min="0" required placeholder="0.00">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="product-stock">Estoque</label>
          <input type="number" id="product-stock" name="stock" min="0" required placeholder="0">
        </div>

        <div class="form-group">
          <label for="product-um">Unidade de Medida</label>
          <select id="product-um" name="um_id" required>
            <option value="">Carregando...</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="product-type">Tipo de Produto</label>
        <select id="product-type" name="type_id" required>
          <option value="">Carregando...</option>
        </select>
      </div>

      <div class="form-group">
        <label for="product-description">Descri√ß√£o</label>
        <textarea id="product-description" name="description" maxlength="500" rows="3" placeholder="Descreva o produto..."></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary">
          <i class="icon-save">üíæ</i> Salvar Produto
        </button>
        <button type="button" id="btn-cancel" class="btn-secondary" style="display:none;">
          <i class="icon-cancel">‚úñ</i> Cancelar Edi√ß√£o
        </button>
      </div>
    </form>

    <div id="product-message"></div>
  </div>

  <div class="products-table-container">
    <h2>Lista de Produtos</h2>
    <div class="table-responsive">
      <table id="products-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Descri√ß√£o</th>
            <th>Estoque</th>
            <th>Tipo</th>
            <th>Valor</th>
            <th>Unidade</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          <!-- Dados ser√£o carregados via JavaScript -->
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
